// Polkit rule: Allow {{ pi_user }} to manage cast services via D-Bus
// Deployed by Ansible - do not edit manually
polkit.addRule(function(action, subject) {
    if (subject.user != "{{ pi_user }}") return;

    // Start/Stop/Restart specific units
    if (action.id == "org.freedesktop.systemd1.manage-units" &&
        (action.lookup("unit") == "shairport-sync.service" ||
         action.lookup("unit") == "raspotify.service")) {
        return polkit.Result.YES;
    }

    // EnableUnitFiles/DisableUnitFiles
    if (action.id == "org.freedesktop.systemd1.manage-unit-files") {
        return polkit.Result.YES;
    }

    // Reload daemon (called after enable/disable)
    if (action.id == "org.freedesktop.systemd1.reload-daemon") {
        return polkit.Result.YES;
    }
});
